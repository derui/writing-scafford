
guard :shell do

  watch(%r{(.+\.adoc)}) {|m|
    p "Build document with #{m[1].to_s}"
    `asciidoctor -r asciidoctor-pdf -r asciidoctor-diagram -b pdf -o /documents/public/index.pdf /documents/assets/index.adoc`
  }

  Process.fork do
    trap("INT") { exit 0}
    `ruby /watcher.rb`
  end
end
